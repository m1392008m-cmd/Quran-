<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø±Ø§Ø¨ Ø§Ù„Ø­ÙƒÙ…Ø© - Ø±Ù…Ø¶Ø§Ù† 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,700;1,700&family=Reem+Kufi:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --islamic-green: #064e3b;
            --royal-gold: #c5a059;
            --deep-blue: #002366;
            --parchment: #fdf5e6;
        }

        body {
            background-color: #050505;
            background-image: radial-gradient(circle at center, #0a2a22 0%, #000 100%);
            color: var(--royal-gold);
            font-family: 'Amiri', serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 15px;
            min-height: 100vh;
            margin: 0;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø­Ø±Ø§Ø¨ Ø§Ù„Ù…Ù„ÙƒÙŠ */
        .mihrab-card {
            width: 100%;
            max-width: 400px;
            height: 580px;
            background: var(--parchment);
            border: 8px double var(--royal-gold);
            border-radius: 100px 100px 10px 10px; /* Ø´ÙƒÙ„ Ù‚Ù…Ø© Ø§Ù„Ù…Ø­Ø±Ø§Ø¨ */
            position: relative;
            padding: 60px 30px;
            box-sizing: border-box;
            box-shadow: 0 0 50px rgba(197, 160, 89, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
        }

        .mihrab-card::before {
            content: "ï·½";
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            font-size: 2.5rem; color: var(--islamic-green);
        }

        #display-text {
            color: #1a1a1a;
            font-size: 1.6rem;
            line-height: 1.9;
            font-weight: 700;
            z-index: 2;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ */
        .doors-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            max-width: 400px;
            margin-top: 30px;
        }

        button {
            padding: 15px;
            background: rgba(6, 78, 59, 0.4);
            color: var(--royal-gold);
            border: 1px solid var(--royal-gold);
            cursor: pointer;
            font-family: 'Reem Kufi', sans-serif;
            font-size: 1.1rem;
            transition: 0.3s ease;
            border-radius: 5px;
        }

        button:hover {
            background: var(--royal-gold);
            color: var(--islamic-green);
            transform: translateY(-2px);
        }

        .btn-download {
            grid-column: span 2;
            background: var(--islamic-green);
            color: #fff;
            font-weight: bold;
            border: 2px solid var(--royal-gold);
        }

        #status-msg {
            margin-top: 15px;
            font-size: 0.9rem;
            color: #fff;
            height: 20px;
            font-family: 'Reem Kufi', sans-serif;
        }

        .card-footer {
            position: absolute;
            bottom: 25px;
            width: 100%;
            left: 0;
            font-size: 0.9rem;
            color: var(--islamic-green);
            opacity: 0.7;
        }
    </style>
</head>
<body>

    <h1 style="font-family: 'Reem Kufi'; margin-bottom: 5px;">Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ù‡Ø¯Ø§ÙŠØ©</h1>
    <p style="color: var(--royal-gold); margin-bottom: 25px;">Ø§Ø³ØªØ®Ø±Ø¬ Ù†ØµÙŠØ¨Ùƒ Ù…Ù† Ù†ÙˆØ± Ø§Ù„Ø¹Ù„Ù…</p>

    <div class="mihrab-card" id="myCard">
        <div id="display-text">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø­Ø¯ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ Ù„Ø§Ø³ØªØ­Ø¶Ø§Ø± Ø§Ù„Ø­ÙƒÙ…Ø©...</div>
        <div class="card-footer">Ù…Ù† Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ù…Ù„ÙƒÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ</div>
    </div>

    <div id="status-msg"></div>

    <div class="doors-grid">
        <button onclick="smartFetch('azkar.html', 'Ø§Ù„Ø£Ø°ÙƒØ§Ø±')">Ûž Ø¨Ø§Ø¨ Ø§Ù„Ø£Ø°ÙƒØ§Ø±</button>
        <button onclick="smartFetch('hadith.html', 'Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«')">Ûž Ø¨Ø§Ø¨ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</button>
        <button onclick="smartFetch('duas.html', 'Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©')">Ûž Ø¨Ø§Ø¨ Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</button>
        <button onclick="smartFetch('werd.html', 'Ø§Ù„ÙˆØ±Ø¯')">Ûž Ø¨Ø§Ø¨ Ø§Ù„ÙˆØ±Ø¯</button>
        <button class="btn-download" onclick="downloadImage()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø© ðŸ“¥</button>
    </div>

    <script>
        async function smartFetch(url, doorName) {
            const status = document.getElementById('status-msg');
            const display = document.getElementById('display-text');
            status.innerText = `Ø¬Ø§Ø±ÙŠ ÙØªØ­ ${doorName}...`;
            display.style.opacity = "0.5";

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error();
                
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                // Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ø¯ÙŠÙ†ÙŠ
                const keywords = ['Ø§Ù„Ù„Ù‡', 'Ø§Ù„Ù„Ù‡Ù…', 'Ù‚Ø§Ù„', 'Ø±Ø³ÙˆÙ„', 'Ø³Ø¨Ø­Ø§Ù†', 'Ø¢Ù…Ù†ÙˆØ§', 'ÙŠØ§ Ø±Ø¨', 'Ø§Ù„Ø­Ù…Ø¯', 'Ù†Ø¨ÙŠ'];

                // Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØªÙŠ ÙŠØ±Ø¬Ø­ ÙˆØ¬ÙˆØ¯ Ù†ØµÙˆØµ Ø¨Ù‡Ø§
                let elements = Array.from(doc.querySelectorAll('p, span, li, h3, .content, .text'));
                
                let filteredTexts = elements
                    .map(el => el.innerText.trim())
                    .filter(t => {
                        return t.length > 20 && // Ù„ÙŠØ³ Ù‚ØµÙŠØ±Ø§Ù‹ Ø¬Ø¯Ø§Ù‹
                               t.length < 400 && // Ù„ÙŠØ³ Ø·ÙˆÙŠÙ„Ø§Ù‹ Ø¬Ø¯Ø§Ù‹
                               keywords.some(k => t.includes(k)) && // ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª Ø¯ÙŠÙ†ÙŠØ©
                               !t.includes('{') && !t.includes('function'); // Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
                    });

                if (filteredTexts.length > 0) {
                    const randomText = filteredTexts[Math.floor(Math.random() * filteredTexts.length)];
                    display.innerText = randomText;
                    status.innerText = `ØªÙ… Ø§Ø³ØªØ­Ø¶Ø§Ø± Ù†Øµ Ù…Ù† ${doorName}`;
                } else {
                    display.innerText = "Ø§Ù„Ø¨Ø§Ø¨ Ù…ØºÙ„Ù‚ Ù…Ø¤Ù‚ØªØ§Ù‹.. Ø­Ø§ÙˆÙ„ ÙÙŠ Ø¨Ø§Ø¨ Ø¢Ø®Ø±.";
                    status.innerText = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØµÙˆØµ Ù…ØªÙˆØ§ÙÙ‚Ø©.";
                }
            } catch (error) {
                status.innerText = "ØªÙ†Ø¨ÙŠÙ‡: ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„ÙØ§Øª Ø§Ù„Ù€ HTML ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø³Ø§Ø±.";
                display.innerText = "ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø²ÙŠÙ†Ø©.. ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¹Ù„Ù‰ GitHub Ø£Ùˆ ØªØ´ØºÙŠÙ„Ù‡Ø§ Ø¹Ø¨Ø± Ø³ÙŠØ±ÙØ± Ù…Ø­Ù„ÙŠ.";
            }
            display.style.opacity = "1";
        }

        function downloadImage() {
            const card = document.getElementById('myCard');
            html2canvas(card, { scale: 3 }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'Mihrab_Dua.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
</body>
</html>
